<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Inline assembler for Thumb2 architectures &#8212; MicroPython latest documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css?v=def86cc0" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=d5a28fe3" />
    <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=c6e86fd7"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1. Register move instructions" href="asm_thumb2_mov.html" />
    <link rel="prev" title="Package management" href="packages.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="asm_thumb2_mov.html" title="1. Register move instructions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="packages.html" title="Package management"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MicroPython latest documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">MicroPython language and implementation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Inline assembler for Thumb2 architectures</a></li> 
      </ul>
    </div>  

    <div class="document">
  
    <div class="wy-alert wy-alert-danger">
      <p>
        This is the documentation for the latest development branch of
        MicroPython and may refer to features that are not available in released
        versions.
      </p>
      <p>
        If you are looking for the documentation for a specific release, use
        the drop-down menu on the left and select the desired version.
      </p>
    </div>
  
  
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="inline-assembler-for-thumb2-architectures">
<span id="asm-thumb2-index"></span><h1>Inline assembler for Thumb2 architectures<a class="headerlink" href="#inline-assembler-for-thumb2-architectures" title="Link to this heading">¶</a></h1>
<p>This document assumes some familiarity with assembly language programming and should be read after studying
the <a class="reference internal" href="../pyboard/tutorial/assembler.html#pyboard-tutorial-assembler"><span class="std std-ref">tutorial</span></a>. For a detailed description of the instruction set consult the
Architecture Reference Manual detailed below.
The inline assembler supports a subset of the ARM Thumb-2 instruction set described here. The syntax tries
to be as close as possible to that defined in the above ARM manual, converted to Python function calls.</p>
<p>Instructions operate on 32 bit signed integer data except where stated otherwise. Most supported instructions
operate on registers <code class="docutils literal notranslate"><span class="pre">R0-R7</span></code> only: where <code class="docutils literal notranslate"><span class="pre">R8-R15</span></code> are supported this is stated. Registers <code class="docutils literal notranslate"><span class="pre">R8-R12</span></code> must be
restored to their initial value before return from a function. Registers <code class="docutils literal notranslate"><span class="pre">R13-R15</span></code> constitute the Link Register,
Stack Pointer and Program Counter respectively.</p>
<section id="document-conventions">
<h2>Document conventions<a class="headerlink" href="#document-conventions" title="Link to this heading">¶</a></h2>
<p>Where possible the behaviour of each instruction is described in Python, for example</p>
<ul class="simple">
<li><p>add(Rd, Rn, Rm) <code class="docutils literal notranslate"><span class="pre">Rd</span> <span class="pre">=</span> <span class="pre">Rn</span> <span class="pre">+</span> <span class="pre">Rm</span></code></p></li>
</ul>
<p>This enables the effect of instructions to be demonstrated in Python. In certain case this is impossible
because Python doesn’t support concepts such as indirection. The pseudocode employed in such cases is
described on the relevant page.</p>
</section>
<section id="instruction-categories">
<h2>Instruction categories<a class="headerlink" href="#instruction-categories" title="Link to this heading">¶</a></h2>
<p>The following sections details the subset of the ARM Thumb-2 instruction set supported by MicroPython.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="asm_thumb2_mov.html">1. Register move instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="asm_thumb2_ldr.html">2. Load register from memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="asm_thumb2_str.html">3. Store register to memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="asm_thumb2_logical_bit.html">4. Logical &amp; bitwise instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="asm_thumb2_arith.html">5. Arithmetic instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="asm_thumb2_compare.html">6. Comparison instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="asm_thumb2_label_branch.html">7. Branch instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="asm_thumb2_stack.html">8. Stack push and pop</a></li>
<li class="toctree-l1"><a class="reference internal" href="asm_thumb2_misc.html">9. Miscellaneous instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="asm_thumb2_float.html">10. Floating point instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="asm_thumb2_directives.html">11. Assembler directives</a></li>
</ul>
</div>
</section>
<section id="usage-examples">
<h2>Usage examples<a class="headerlink" href="#usage-examples" title="Link to this heading">¶</a></h2>
<p>These sections provide further code examples and hints on the use of the assembler.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="asm_thumb2_hints_tips.html">1. Hints and tips</a></li>
</ul>
</div>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../pyboard/tutorial/assembler.html#pyboard-tutorial-assembler"><span class="std std-ref">Assembler Tutorial</span></a></p></li>
<li><p><a class="reference external" href="http://wiki.micropython.org/platforms/boards/pyboard/assembler">Wiki hints and tips</a></p></li>
<li><p><a class="reference external" href="https://github.com/micropython/micropython/blob/master/py/emitinlinethumb.c">uPy Inline Assembler source-code,
emitinlinethumb.c</a></p></li>
<li><p><a class="reference external" href="http://infocenter.arm.com/help/topic/com.arm.doc.qrc0001l/QRC0001_UAL.pdf">ARM Thumb2 Instruction Set Quick Reference
Card</a></p></li>
<li><p><a class="reference external" href="http://www.google.ae/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;sqi=2&amp;ved=0CBoQFjAA&amp;url=http%3A%2F%2Fwww.st.com%2Fst-web-ui%2Fstatic%2Factive%2Fen%2Fresource%2Ftechnical%2Fdocument%2Freference_manual%2FDM00031020.pdf&amp;ei=G0rSU66xFeuW0QWYwoD4CQ&amp;usg=AFQjCNFuW6TgzE4QpahO_U7g3f3wdwecAg&amp;sig2=iET-R0y9on_Pbflzf9aYDw&amp;bvm=bv.71778758,bs.1,d.bGQ">RM0090 Reference
Manual</a></p></li>
<li><p>ARM v7-M Architecture Reference Manual (Available on the
ARM site after a simple registration procedure. Also available on academic sites but beware of out of date versions.)</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>

      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Inline assembler for Thumb2 architectures</a><ul>
<li><a class="reference internal" href="#document-conventions">Document conventions</a></li>
<li><a class="reference internal" href="#instruction-categories">Instruction categories</a></li>
<li><a class="reference internal" href="#usage-examples">Usage examples</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="packages.html"
                          title="previous chapter">Package management</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="asm_thumb2_mov.html"
                          title="next chapter"><span class="section-number">1. </span>Register move instructions</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/asm_thumb2_index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="asm_thumb2_mov.html" title="1. Register move instructions"
             >next</a> |</li>
        <li class="right" >
          <a href="packages.html" title="Package management"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MicroPython latest documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >MicroPython language and implementation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Inline assembler for Thumb2 architectures</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright - The MicroPython Documentation is Copyright © 2014-2024, Damien P. George, Paul Sokolovsky, and contributors.
      Last updated on 24 Jul 2024.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    </div>
  </body>
</html>