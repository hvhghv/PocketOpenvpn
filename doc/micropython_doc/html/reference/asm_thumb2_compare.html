<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>6. Comparison instructions &#8212; MicroPython latest documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css?v=def86cc0" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=d5a28fe3" />
    <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=c6e86fd7"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="7. Branch instructions" href="asm_thumb2_label_branch.html" />
    <link rel="prev" title="5. Arithmetic instructions" href="asm_thumb2_arith.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="asm_thumb2_label_branch.html" title="7. Branch instructions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="asm_thumb2_arith.html" title="5. Arithmetic instructions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MicroPython latest documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >MicroPython language and implementation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="asm_thumb2_index.html" accesskey="U">Inline assembler for Thumb2 architectures</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">6. </span>Comparison instructions</a></li> 
      </ul>
    </div>  

    <div class="document">
  
    <div class="wy-alert wy-alert-danger">
      <p>
        This is the documentation for the latest development branch of
        MicroPython and may refer to features that are not available in released
        versions.
      </p>
      <p>
        If you are looking for the documentation for a specific release, use
        the drop-down menu on the left and select the desired version.
      </p>
    </div>
  
  
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="comparison-instructions">
<h1><span class="section-number">6. </span>Comparison instructions<a class="headerlink" href="#comparison-instructions" title="Link to this heading">¶</a></h1>
<p>These perform an arithmetic or logical instruction on two arguments, discarding the result
but setting the condition flags. Typically these are used to test data values without changing
them prior to executing a conditional branch.</p>
<section id="document-conventions">
<h2><span class="section-number">6.1. </span>Document conventions<a class="headerlink" href="#document-conventions" title="Link to this heading">¶</a></h2>
<p>Notation: <code class="docutils literal notranslate"><span class="pre">Rd,</span> <span class="pre">Rm,</span> <span class="pre">Rn</span></code> denote ARM registers R0-R7. <code class="docutils literal notranslate"><span class="pre">imm8</span></code> denotes an immediate
value having a width of 8 bits.</p>
</section>
<section id="the-application-program-status-register-apsr">
<h2><span class="section-number">6.2. </span>The Application Program Status Register (APSR)<a class="headerlink" href="#the-application-program-status-register-apsr" title="Link to this heading">¶</a></h2>
<p>This contains four bits which are tested by the conditional branch instructions. Typically a
conditional branch will test multiple bits, for example <code class="docutils literal notranslate"><span class="pre">bge(LABEL)</span></code>. The meaning of
condition codes can depend on whether the operands of an arithmetic instruction are viewed as
signed or unsigned integers. Thus <code class="docutils literal notranslate"><span class="pre">bhi(LABEL)</span></code> assumes unsigned numbers were processed while
<code class="docutils literal notranslate"><span class="pre">bgt(LABEL)</span></code> assumes signed operands.</p>
</section>
<section id="apsr-bits">
<h2><span class="section-number">6.3. </span>APSR Bits<a class="headerlink" href="#apsr-bits" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Z (zero)</p></li>
</ul>
<p>This is set if the result of an operation is zero or the operands of a comparison are equal.</p>
<ul class="simple">
<li><p>N (negative)</p></li>
</ul>
<p>Set if the result is negative.</p>
<ul class="simple">
<li><p>C (carry)</p></li>
</ul>
<p>An addition sets the carry flag when the result overflows out of the MSB, for example adding
0x80000000 and 0x80000000. By the nature of two’s complement arithmetic this behaviour is reversed
on subtraction, with a borrow indicated by the carry bit being clear. Thus 0x10 - 0x01 is executed
as 0x10 + 0xffffffff which will set the carry bit.</p>
<ul class="simple">
<li><p>V (overflow)</p></li>
</ul>
<p>The overflow flag is set if the result, viewed as a two’s compliment number, has the “wrong” sign
in relation to the operands. For example adding 1 to 0x7fffffff will set the overflow bit because
the result (0x8000000), viewed as a two’s complement integer, is negative. Note that in this instance
the carry bit is not set.</p>
</section>
<section id="id1">
<h2><span class="section-number">6.4. </span>Comparison instructions<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h2>
<p>These set the APSR (Application Program Status Register) N (negative), Z (zero), C (carry) and V
(overflow) flags.</p>
<ul class="simple">
<li><p>cmp(Rn, imm8) <code class="docutils literal notranslate"><span class="pre">Rn</span> <span class="pre">-</span> <span class="pre">imm8</span></code></p></li>
<li><p>cmp(Rn, Rm) <code class="docutils literal notranslate"><span class="pre">Rn</span> <span class="pre">-</span> <span class="pre">Rm</span></code></p></li>
<li><p>cmn(Rn, Rm) <code class="docutils literal notranslate"><span class="pre">Rn</span> <span class="pre">+</span> <span class="pre">Rm</span></code></p></li>
<li><p>tst(Rn, Rm) <code class="docutils literal notranslate"><span class="pre">Rn</span> <span class="pre">&amp;</span> <span class="pre">Rm</span></code></p></li>
</ul>
</section>
<section id="conditional-execution">
<h2><span class="section-number">6.5. </span>Conditional execution<a class="headerlink" href="#conditional-execution" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">it</span></code> and <code class="docutils literal notranslate"><span class="pre">ite</span></code> instructions provide a means of conditionally executing from one to four subsequent
instructions without the need for a label.</p>
<ul class="simple">
<li><p>it(&lt;condition&gt;) If then</p></li>
</ul>
<p>Execute the next instruction if &lt;condition&gt; is true:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmp</span><span class="p">(</span><span class="n">r0</span><span class="p">,</span> <span class="n">r1</span><span class="p">)</span>
<span class="n">it</span><span class="p">(</span><span class="n">eq</span><span class="p">)</span>
<span class="n">mov</span><span class="p">(</span><span class="n">r0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="c1"># runs if r0 == r1</span>
<span class="c1"># execution continues here</span>
</pre></div>
</div>
<ul class="simple">
<li><p>ite(&lt;condition&gt;) If then else</p></li>
</ul>
<p>If &lt;condition&gt; is true, execute the next instruction, otherwise execute the
subsequent one. Thus:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmp</span><span class="p">(</span><span class="n">r0</span><span class="p">,</span> <span class="n">r1</span><span class="p">)</span>
<span class="n">ite</span><span class="p">(</span><span class="n">eq</span><span class="p">)</span>
<span class="n">mov</span><span class="p">(</span><span class="n">r0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="c1"># runs if r0 == r1</span>
<span class="n">mov</span><span class="p">(</span><span class="n">r0</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span> <span class="c1"># runs if r0 != r1</span>
<span class="c1"># execution continues here</span>
</pre></div>
</div>
<p>This may be extended to control the execution of up to four subsequent instructions: it[x[y[z]]]
where x,y,z=t/e; e.g. itt, itee, itete, ittte, itttt, iteee, etc.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>

      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">6. Comparison instructions</a><ul>
<li><a class="reference internal" href="#document-conventions">6.1. Document conventions</a></li>
<li><a class="reference internal" href="#the-application-program-status-register-apsr">6.2. The Application Program Status Register (APSR)</a></li>
<li><a class="reference internal" href="#apsr-bits">6.3. APSR Bits</a></li>
<li><a class="reference internal" href="#id1">6.4. Comparison instructions</a></li>
<li><a class="reference internal" href="#conditional-execution">6.5. Conditional execution</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="asm_thumb2_arith.html"
                          title="previous chapter"><span class="section-number">5. </span>Arithmetic instructions</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="asm_thumb2_label_branch.html"
                          title="next chapter"><span class="section-number">7. </span>Branch instructions</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/asm_thumb2_compare.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="asm_thumb2_label_branch.html" title="7. Branch instructions"
             >next</a> |</li>
        <li class="right" >
          <a href="asm_thumb2_arith.html" title="5. Arithmetic instructions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MicroPython latest documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >MicroPython language and implementation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="asm_thumb2_index.html" >Inline assembler for Thumb2 architectures</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">6. </span>Comparison instructions</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright - The MicroPython Documentation is Copyright © 2014-2024, Damien P. George, Paul Sokolovsky, and contributors.
      Last updated on 24 Jul 2024.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    </div>
  </body>
</html>