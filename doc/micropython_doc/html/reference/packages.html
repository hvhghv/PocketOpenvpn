<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Package management &#8212; MicroPython latest documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css?v=def86cc0" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=d5a28fe3" />
    <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=c6e86fd7"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Inline assembler for Thumb2 architectures" href="asm_thumb2_index.html" />
    <link rel="prev" title="MicroPython manifest files" href="manifest.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="asm_thumb2_index.html" title="Inline assembler for Thumb2 architectures"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="manifest.html" title="MicroPython manifest files"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MicroPython latest documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">MicroPython language and implementation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Package management</a></li> 
      </ul>
    </div>  

    <div class="document">
  
    <div class="wy-alert wy-alert-danger">
      <p>
        This is the documentation for the latest development branch of
        MicroPython and may refer to features that are not available in released
        versions.
      </p>
      <p>
        If you are looking for the documentation for a specific release, use
        the drop-down menu on the left and select the desired version.
      </p>
    </div>
  
  
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="package-management">
<span id="packages"></span><h1>Package management<a class="headerlink" href="#package-management" title="Link to this heading">¶</a></h1>
<section id="installing-packages-with-mip">
<h2>Installing packages with <code class="docutils literal notranslate"><span class="pre">mip</span></code><a class="headerlink" href="#installing-packages-with-mip" title="Link to this heading">¶</a></h2>
<p>Network-capable boards include the <code class="docutils literal notranslate"><span class="pre">mip</span></code> module, which can install packages
from <a class="reference internal" href="glossary.html#term-micropython-lib"><span class="xref std std-term">micropython-lib</span></a> and from third-party sites (including GitHub, GitLab).</p>
<p><code class="docutils literal notranslate"><span class="pre">mip</span></code> (“mip installs packages”) is similar in concept to Python’s <code class="docutils literal notranslate"><span class="pre">pip</span></code> tool,
however it does not use the PyPI index, rather it uses <a class="reference internal" href="glossary.html#term-micropython-lib"><span class="xref std std-term">micropython-lib</span></a>
as its index by default. <code class="docutils literal notranslate"><span class="pre">mip</span></code> will automatically fetch compiled
<a class="reference internal" href="glossary.html#term-.mpy-file"><span class="xref std std-term">.mpy file</span></a> when downloading from micropython-lib.</p>
<p>The most common way to use <code class="docutils literal notranslate"><span class="pre">mip</span></code> is from the REPL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">mip</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mip</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;pkgname&quot;</span><span class="p">)</span>  <span class="c1"># Installs the latest version of &quot;pkgname&quot; (and dependencies)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mip</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;pkgname&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;x.y&quot;</span><span class="p">)</span>  <span class="c1"># Installs version x.y of &quot;pkgname&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mip</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;pkgname&quot;</span><span class="p">,</span> <span class="n">mpy</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Installs the source version (i.e. .py rather than .mpy files)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">mip</span></code> will detect an appropriate location on the filesystem by searching
<code class="docutils literal notranslate"><span class="pre">sys.path</span></code> for the first entry ending in <code class="docutils literal notranslate"><span class="pre">/lib</span></code>. You can override the
destination using <code class="docutils literal notranslate"><span class="pre">target</span></code>, but note that this path must be in <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> to be
able to subsequently import it.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mip</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;pkgname&quot;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s2">&quot;third-party&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;third-party&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>As well as downloading packages from the micropython-lib index, <code class="docutils literal notranslate"><span class="pre">mip</span></code> can also
install third-party libraries. The simplest way is to download a file directly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mip</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;http://example.com/x/y/foo.py&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mip</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;http://example.com/x/y/foo.mpy&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>When installing a file directly, the <code class="docutils literal notranslate"><span class="pre">target</span></code> argument is still supported to set
the destination path, but <code class="docutils literal notranslate"><span class="pre">mpy</span></code> and <code class="docutils literal notranslate"><span class="pre">version</span></code> are ignored.</p>
<p>The URL can also start with <code class="docutils literal notranslate"><span class="pre">github:</span></code> or <code class="docutils literal notranslate"><span class="pre">gitlab:</span></code> as a simple way of pointing to content
hosted on GitHub or GitLab:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mip</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;github:org/repo/path/foo.py&quot;</span><span class="p">)</span>  <span class="c1"># Uses default branch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mip</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;github:org/repo/path/foo.py&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;branch-or-tag&quot;</span><span class="p">)</span>  <span class="c1"># Optionally specify the branch or tag</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mip</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;gitlab:org/repo/path/foo.py&quot;</span><span class="p">)</span>  <span class="c1"># Uses default branch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mip</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;gitlab:org/repo/path/foo.py&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;branch-or-tag&quot;</span><span class="p">)</span>  <span class="c1"># Optionally specify the branch or tag</span>
</pre></div>
</div>
<p>More sophisticated packages (i.e. with more than one file, or with dependencies)
can be downloaded by specifying the path to their <code class="docutils literal notranslate"><span class="pre">package.json</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mip</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;http://example.com/x/package.json&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mip</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;github:org/user/path/package.json&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mip</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;gitlab:org/user/path/package.json&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If no json file is specified, then “package.json” is implicitly added:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mip</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;http://example.com/x/&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mip</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;github:org/repo&quot;</span><span class="p">)</span>  <span class="c1"># Uses default branch of that repo</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mip</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;github:org/repo&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;branch-or-tag&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mip</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;gitlab:org/repo&quot;</span><span class="p">)</span>  <span class="c1"># Uses default branch of that repo</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mip</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;gitlab:org/repo&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;branch-or-tag&quot;</span><span class="p">)</span>
</pre></div>
</div>
<section id="using-mip-on-the-unix-port">
<h3>Using <code class="docutils literal notranslate"><span class="pre">mip</span></code> on the Unix port<a class="headerlink" href="#using-mip-on-the-unix-port" title="Link to this heading">¶</a></h3>
<p>On the Unix port, <code class="docutils literal notranslate"><span class="pre">mip</span></code> can be used at the REPL as above, and also by using <code class="docutils literal notranslate"><span class="pre">-m</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./micropython -m mip install pkgname-or-url
$ ./micropython -m mip install pkgname-or-url@version
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--target=path</span></code>, <code class="docutils literal notranslate"><span class="pre">--no-mpy</span></code>, and <code class="docutils literal notranslate"><span class="pre">--index</span></code> arguments can be set:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./micropython -m mip install --target=third-party pkgname
$ ./micropython -m mip install --no-mpy pkgname
$ ./micropython -m mip install --index https://host/pi pkgname
</pre></div>
</div>
</section>
</section>
<section id="installing-packages-with-mpremote">
<h2>Installing packages with <code class="docutils literal notranslate"><span class="pre">mpremote</span></code><a class="headerlink" href="#installing-packages-with-mpremote" title="Link to this heading">¶</a></h2>
<p>The <a class="reference internal" href="glossary.html#term-mpremote"><span class="xref std std-term">mpremote</span></a> tool also includes the same functionality as <code class="docutils literal notranslate"><span class="pre">mip</span></code> and
can be used from a host PC to install packages to a locally connected device
(e.g. via USB or UART):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mpremote mip install pkgname
$ mpremote mip install pkgname@x.y
$ mpremote mip install http://example.com/x/y/foo.py
$ mpremote mip install github:org/repo
$ mpremote mip install github:org/repo@branch-or-tag
$ mpremote mip install gitlab:org/repo
$ mpremote mip install gitlab:org/repo@branch-or-tag
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--target=path</span></code>, <code class="docutils literal notranslate"><span class="pre">--no-mpy</span></code>, and <code class="docutils literal notranslate"><span class="pre">--index</span></code> arguments can be set:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mpremote mip install --target=/flash/third-party pkgname
$ mpremote mip install --no-mpy pkgname
$ mpremote mip install --index https://host/pi pkgname
</pre></div>
</div>
</section>
<section id="installing-packages-manually">
<h2>Installing packages manually<a class="headerlink" href="#installing-packages-manually" title="Link to this heading">¶</a></h2>
<p>Packages can also be installed (in either .py or .mpy form) by manually copying
the files to the device. Depending on the board this might be via USB Mass Storage,
the <a class="reference internal" href="glossary.html#term-mpremote"><span class="xref std std-term">mpremote</span></a> tool (e.g. <code class="docutils literal notranslate"><span class="pre">mpremote</span> <span class="pre">fs</span> <span class="pre">cp</span> <span class="pre">path/to/package.py</span> <span class="pre">:package.py</span></code>),
<a class="reference internal" href="glossary.html#term-webrepl"><span class="xref std std-term">webrepl</span></a>, etc.</p>
</section>
<section id="writing-publishing-packages">
<h2>Writing &amp; publishing packages<a class="headerlink" href="#writing-publishing-packages" title="Link to this heading">¶</a></h2>
<p>Publishing to <a class="reference internal" href="glossary.html#term-micropython-lib"><span class="xref std std-term">micropython-lib</span></a> is the easiest way to make your package
broadly accessible to MicroPython users, and automatically available via
<code class="docutils literal notranslate"><span class="pre">mip</span></code> and <code class="docutils literal notranslate"><span class="pre">mpremote</span></code> and compiled to bytecode. See
<a class="reference external" href="https://github.com/micropython/micropython-lib">https://github.com/micropython/micropython-lib</a> for more information.</p>
<p>To write a “self-hosted” package that can be downloaded by <code class="docutils literal notranslate"><span class="pre">mip</span></code> or
<code class="docutils literal notranslate"><span class="pre">mpremote</span></code>, you need a static webserver (or GitHub) to host either a
single .py file, or a <code class="docutils literal notranslate"><span class="pre">package.json</span></code> file alongside your .py files.</p>
<p>A typical <code class="docutils literal notranslate"><span class="pre">package.json</span></code> for an example <code class="docutils literal notranslate"><span class="pre">mlx90640</span></code> library looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;urls&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="s2">&quot;mlx90640/__init__.py&quot;</span><span class="p">,</span> <span class="s2">&quot;github:org/micropython-mlx90640/mlx90640/__init__.py&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;mlx90640/utils.py&quot;</span><span class="p">,</span> <span class="s2">&quot;github:org/micropython-mlx90640/mlx90640/utils.py&quot;</span><span class="p">]</span>
  <span class="p">],</span>
  <span class="s2">&quot;deps&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="s2">&quot;collections-defaultdict&quot;</span><span class="p">,</span> <span class="s2">&quot;latest&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;os-path&quot;</span><span class="p">,</span> <span class="s2">&quot;latest&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;github:org/micropython-additions&quot;</span><span class="p">,</span> <span class="s2">&quot;main&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;gitlab:org/micropython-otheradditions&quot;</span><span class="p">,</span> <span class="s2">&quot;main&quot;</span><span class="p">]</span>
  <span class="p">],</span>
  <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.2&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This includes two files, hosted at a GitHub repo named
<code class="docutils literal notranslate"><span class="pre">org/micropython-mlx90640</span></code>, which install into the <code class="docutils literal notranslate"><span class="pre">mlx90640</span></code> directory on
the device. It depends on <code class="docutils literal notranslate"><span class="pre">collections-defaultdict</span></code> and <code class="docutils literal notranslate"><span class="pre">os-path</span></code> which will
be installed automatically from the <a class="reference internal" href="glossary.html#term-micropython-lib"><span class="xref std std-term">micropython-lib</span></a>. The third
dependency installs the content as defined by the <code class="docutils literal notranslate"><span class="pre">package.json</span></code> file of the
<code class="docutils literal notranslate"><span class="pre">main</span></code> branch of the GitHub repo <code class="docutils literal notranslate"><span class="pre">org/micropython-additions</span></code>.</p>
</section>
<section id="freezing-packages">
<h2>Freezing packages<a class="headerlink" href="#freezing-packages" title="Link to this heading">¶</a></h2>
<p>When a Python module or package is imported from the device filesystem, it is
compiled into <a class="reference internal" href="glossary.html#term-bytecode"><span class="xref std std-term">bytecode</span></a> in RAM, ready to be executed by the VM. For
a <a class="reference internal" href="glossary.html#term-.mpy-file"><span class="xref std std-term">.mpy file</span></a>, this conversion has been done already, but the bytecode
still ends up in RAM.</p>
<p>For low-memory devices, or for large applications, it can be advantageous to
instead run the bytecode from ROM (i.e. flash memory). This can be done
by “freezing” the bytecode into the MicroPython firmware, which is then flashed
to the device. The runtime performance is the same (although importing is
faster), but it can free up significant amounts of RAM for your program to
use.</p>
<p>The downside of this approach is that it’s much slower to develop, because you
have to flash the firmware each time, but it can be still useful to freeze
dependencies that don’t change often.</p>
<p>Freezing is done by writing a manifest file and using it in the build, often as
part of a custom board definition. See the <a class="reference internal" href="manifest.html#manifest"><span class="std std-ref">MicroPython manifest files</span></a> guide for more
information.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>

      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Package management</a><ul>
<li><a class="reference internal" href="#installing-packages-with-mip">Installing packages with <code class="docutils literal notranslate"><span class="pre">mip</span></code></a><ul>
<li><a class="reference internal" href="#using-mip-on-the-unix-port">Using <code class="docutils literal notranslate"><span class="pre">mip</span></code> on the Unix port</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installing-packages-with-mpremote">Installing packages with <code class="docutils literal notranslate"><span class="pre">mpremote</span></code></a></li>
<li><a class="reference internal" href="#installing-packages-manually">Installing packages manually</a></li>
<li><a class="reference internal" href="#writing-publishing-packages">Writing &amp; publishing packages</a></li>
<li><a class="reference internal" href="#freezing-packages">Freezing packages</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="manifest.html"
                          title="previous chapter">MicroPython manifest files</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="asm_thumb2_index.html"
                          title="next chapter">Inline assembler for Thumb2 architectures</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/packages.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="asm_thumb2_index.html" title="Inline assembler for Thumb2 architectures"
             >next</a> |</li>
        <li class="right" >
          <a href="manifest.html" title="MicroPython manifest files"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MicroPython latest documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >MicroPython language and implementation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Package management</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright - The MicroPython Documentation is Copyright © 2014-2024, Damien P. George, Paul Sokolovsky, and contributors.
      Last updated on 24 Jul 2024.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    </div>
  </body>
</html>