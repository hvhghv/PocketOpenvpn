<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>General information about the WiPy &#8212; MicroPython latest documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css?v=def86cc0" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=d5a28fe3" />
    <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=c6e86fd7"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="WiPy tutorials and examples" href="tutorial/index.html" />
    <link rel="prev" title="Quick reference for the WiPy" href="quickref.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tutorial/index.html" title="WiPy tutorials and examples"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="quickref.html" title="Quick reference for the WiPy"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MicroPython latest documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="quickref.html" accesskey="U">Quick reference for the WiPy</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">General information about the WiPy</a></li> 
      </ul>
    </div>  

    <div class="document">
  
    <div class="wy-alert wy-alert-danger">
      <p>
        This is the documentation for the latest development branch of
        MicroPython and may refer to features that are not available in released
        versions.
      </p>
      <p>
        If you are looking for the documentation for a specific release, use
        the drop-down menu on the left and select the desired version.
      </p>
    </div>
  
  
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="general-information-about-the-wipy">
<span id="wipy-general"></span><h1>General information about the WiPy<a class="headerlink" href="#general-information-about-the-wipy" title="Link to this heading">¶</a></h1>
<section id="no-floating-point-support">
<h2>No floating point support<a class="headerlink" href="#no-floating-point-support" title="Link to this heading">¶</a></h2>
<p>Due to space reasons, there’s no floating point support, and no math module. This
means that floating point numbers cannot be used anywhere in the code, and that
all divisions must be performed using ‘//’ instead of ‘/’. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">//</span> <span class="mi">2</span>  <span class="c1"># this will work</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">/</span> <span class="mi">2</span>   <span class="c1"># this WON&#39;T</span>
</pre></div>
</div>
</section>
<section id="before-applying-power">
<h2>Before applying power<a class="headerlink" href="#before-applying-power" title="Link to this heading">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The GPIO pins of the WiPy are NOT 5V tolerant, connecting them to voltages higher
than 3.6V will cause irreparable damage to the board. ADC pins, when configured
in analog mode cannot withstand voltages above 1.8V. Keep these considerations in
mind when wiring your electronics.</p>
</div>
</section>
<section id="wlan-default-behaviour">
<h2>WLAN default behaviour<a class="headerlink" href="#wlan-default-behaviour" title="Link to this heading">¶</a></h2>
<p>When the WiPy boots with the default factory configuration starts in Access Point
mode with <code class="docutils literal notranslate"><span class="pre">ssid</span></code> that starts with: <code class="docutils literal notranslate"><span class="pre">wipy-wlan</span></code> and <code class="docutils literal notranslate"><span class="pre">key:</span> <span class="pre">www.wipy.io</span></code>.
Connect to this network and the WiPy will be reachable at <code class="docutils literal notranslate"><span class="pre">192.168.1.1</span></code>. In order
to gain access to the interactive prompt, open a telnet session to that IP address on
the default port (23). You will be asked for credentials:
<code class="docutils literal notranslate"><span class="pre">login:</span> <span class="pre">micro</span></code> and <code class="docutils literal notranslate"><span class="pre">password:</span> <span class="pre">python</span></code></p>
</section>
<section id="telnet-repl">
<span id="wipy-telnet"></span><h2>Telnet REPL<a class="headerlink" href="#telnet-repl" title="Link to this heading">¶</a></h2>
<p>Linux stock telnet works like a charm (also on OSX), but other tools like putty
work quite well too. The default credentials are: <strong>user:</strong> <code class="docutils literal notranslate"><span class="pre">micro</span></code>, <strong>password:</strong> <code class="docutils literal notranslate"><span class="pre">python</span></code>.
See <a class="reference internal" href="#network.Server" title="network.Server"><code class="xref py py-class docutils literal notranslate"><span class="pre">network.Server</span></code></a> for info on how to change the defaults.
For instance, on a linux shell (when connected to the WiPy in AP mode):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ telnet 192.168.1.1
</pre></div>
</div>
</section>
<section id="local-file-system-and-ftp-access">
<span id="wipy-filesystem"></span><h2>Local file system and FTP access<a class="headerlink" href="#local-file-system-and-ftp-access" title="Link to this heading">¶</a></h2>
<p>There is a small internal file system (a drive) on the WiPy, called <code class="docutils literal notranslate"><span class="pre">/flash</span></code>,
which is stored within the external serial flash memory.  If a micro SD card
is hooked-up and mounted, it will be available as well.</p>
<p>When the WiPy starts up, it always boots from the <code class="docutils literal notranslate"><span class="pre">boot.py</span></code> located in the
<code class="docutils literal notranslate"><span class="pre">/flash</span></code> file system. On boot up, the current directory is <code class="docutils literal notranslate"><span class="pre">/flash</span></code>.</p>
<p>The file system is accessible via the native FTP server running in the WiPy.
Open your FTP client of choice and connect to:</p>
<p><strong>url:</strong> <code class="docutils literal notranslate"><span class="pre">ftp://192.168.1.1</span></code>, <strong>user:</strong> <code class="docutils literal notranslate"><span class="pre">micro</span></code>, <strong>password:</strong> <code class="docutils literal notranslate"><span class="pre">python</span></code></p>
<p>See <a class="reference internal" href="#network.Server" title="network.Server"><code class="xref py py-class docutils literal notranslate"><span class="pre">network.Server</span></code></a> for info on how to change the defaults.
The recommended clients are: Linux stock FTP (also in OSX), Filezilla and FireFTP.
For example, on a linux shell:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ftp 192.168.1.1
</pre></div>
</div>
<p>The FTP server on the WiPy doesn’t support active mode, only passive, therefore,
if using the native unix ftp client, just after logging in do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ftp</span><span class="o">&gt;</span> <span class="n">passive</span>
</pre></div>
</div>
<p>Besides that, the FTP server only supports one data connection at a time. Check out
the Filezilla settings section below for more info.</p>
</section>
<section id="filezilla-settings">
<h2>FileZilla settings<a class="headerlink" href="#filezilla-settings" title="Link to this heading">¶</a></h2>
<p>Do not use the quick connect button, instead, open the site manager and create a new
configuration. In the <code class="docutils literal notranslate"><span class="pre">General</span></code> tab make sure that encryption is set to: <code class="docutils literal notranslate"><span class="pre">Only</span> <span class="pre">use</span>
<span class="pre">plain</span> <span class="pre">FTP</span> <span class="pre">(insecure)</span></code>. In the Transfer Settings tab limit the max number of connections
to one, otherwise FileZilla will try to open a second command connection when retrieving
and saving files, and for simplicity and to reduce code size, only one command and one
data connections are possible. Other FTP clients might behave in a similar way.</p>
</section>
<section id="upgrading-the-firmware-over-the-air">
<span id="wipy-firmware-upgrade"></span><h2>Upgrading the firmware Over The Air<a class="headerlink" href="#upgrading-the-firmware-over-the-air" title="Link to this heading">¶</a></h2>
<p>OTA software updates can be performed through the FTP server. Upload the <code class="docutils literal notranslate"><span class="pre">mcuimg.bin</span></code> file
to: <code class="docutils literal notranslate"><span class="pre">/flash/sys/mcuimg.bin</span></code> it will take around 6s. You won’t see the file being stored
inside <code class="docutils literal notranslate"><span class="pre">/flash/sys/</span></code> because it’s actually saved bypassing the user file system, so it
ends up inside the internal <strong>hidden</strong> file system, but rest assured that it was successfully
transferred, and it has been signed with a MD5 checksum to verify its integrity. Now, reset
the WiPy by pressing the switch on the board, or by typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">machine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">machine</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</pre></div>
</div>
<p>Software updates can be found in: <a class="reference external" href="https://github.com/wipy/wipy/releases">https://github.com/wipy/wipy/releases</a> (<strong>Binaries.zip</strong>).
It’s always recommended to update to the latest software, but make sure to
read the <strong>release notes</strong> before.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">bootloader.bin</span></code> found inside <code class="docutils literal notranslate"><span class="pre">Binaries.zip</span></code> is there only for reference, it’s not
needed for the Over The Air update.</p>
</div>
<p>In order to check your software version, do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">uname</span><span class="p">()</span><span class="o">.</span><span class="n">release</span>
</pre></div>
</div>
<p>If the version number is lower than the latest release found in
<a class="reference external" href="https://github.com/wipy/wipy/releases">the releases</a>, go ahead and update your WiPy!</p>
</section>
<section id="boot-modes-and-safe-boot">
<span id="wipy-boot-modes"></span><h2>Boot modes and safe boot<a class="headerlink" href="#boot-modes-and-safe-boot" title="Link to this heading">¶</a></h2>
<p>If you power up normally, or press the reset button, the WiPy will boot
into standard mode; the <code class="docutils literal notranslate"><span class="pre">boot.py</span></code> file will be executed first, then
<code class="docutils literal notranslate"><span class="pre">main.py</span></code> will run.</p>
<p>You can override this boot sequence by pulling <code class="docutils literal notranslate"><span class="pre">GP28</span></code> <strong>up</strong> (connect
it to the 3v3 output pin) during reset. This procedure also allows going
back in time to old firmware versions. The WiPy can hold up to 3 different
firmware versions, which are: the factory firmware plus 2 user updates.</p>
<p>After reset, if <code class="docutils literal notranslate"><span class="pre">GP28</span></code> is held high, the heartbeat LED will start flashing
slowly, if after 3 seconds the pin is still being held high, the LED will start
blinking a bit faster and the WiPy will select the previous user update to boot.
If the previous user update is the desired firmware image, <code class="docutils literal notranslate"><span class="pre">GP28</span></code> must be
released before 3 more seconds elapse. If 3 seconds later the pin is still high,
the factory firmware will be selected, the LED will flash quickly for 1.5 seconds
and the WiPy will proceed to boot. The firmware selection mechanism is as follows:</p>
<p><strong>Safe Boot Pin</strong> <code class="docutils literal notranslate"><span class="pre">GP28</span></code> <strong>released during:</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>1st 3 secs window</p></th>
<th class="head"><p>2nd 3 secs window</p></th>
<th class="head"><p>Final 1.5 secs window</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">Safe boot, <em>latest</em></div>
<div class="line">firmware is selected</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Safe boot, <em>previous</em></div>
<div class="line">user update selected</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Safe boot, the <em>factory</em></div>
<div class="line">firmware is selected</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>On all of the above 3 scenarios, safe boot mode is entered, meaning that
the execution of both <code class="docutils literal notranslate"><span class="pre">boot.py</span></code> and <code class="docutils literal notranslate"><span class="pre">main.py</span></code> is skipped. This is
useful to recover from crash situations caused by the user scripts. The selection
made during safe boot is not persistent, therefore after the next normal reset
the latest firmware will run again.</p>
</section>
<section id="the-heartbeat-led">
<h2>The heartbeat LED<a class="headerlink" href="#the-heartbeat-led" title="Link to this heading">¶</a></h2>
<p>By default the heartbeat LED flashes once every 4s to signal that the system is
alive. This can be overridden through the <a class="reference internal" href="../library/wipy.html#module-wipy" title="wipy: WiPy specific features"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wipy</span></code></a> module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">wipy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wipy</span><span class="o">.</span><span class="n">heartbeat</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>There are currently 2 kinds of errors that you might see:</p>
<ol class="arabic simple">
<li><p>If the heartbeat LED flashes quickly, then a Python script (eg <code class="docutils literal notranslate"><span class="pre">main.py</span></code>)
has an error.  Use the REPL to debug it.</p></li>
<li><p>If the heartbeat LED stays on, then there was a hard fault, you cannot
recover from this, the only way out is to press the reset switch.</p></li>
</ol>
</section>
<section id="details-on-sleep-modes">
<h2>Details on sleep modes<a class="headerlink" href="#details-on-sleep-modes" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">machine.idle()</span></code>: Power consumption: ~12mA (in WLAN STA mode). Wake sources:
any hardware interrupt (including systick with period of 1ms), no special
configuration required.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">machine.lightsleep()</span></code>: 950uA (in WLAN STA mode). Wake sources are <code class="docutils literal notranslate"><span class="pre">Pin</span></code>, <code class="docutils literal notranslate"><span class="pre">RTC</span></code>
and <code class="docutils literal notranslate"><span class="pre">WLAN</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">machine.deepsleep()</span></code>: ~350uA. Wake sources are <code class="docutils literal notranslate"><span class="pre">Pin</span></code> and <code class="docutils literal notranslate"><span class="pre">RTC</span></code>.</p></li>
</ul>
</section>
<section id="additional-details-for-machine-pin">
<h2>Additional details for machine.Pin<a class="headerlink" href="#additional-details-for-machine-pin" title="Link to this heading">¶</a></h2>
<p>On the WiPy board the pins are identified by their string id:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;GP9&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">,</span> <span class="n">pull</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">drive</span><span class="o">=</span><span class="n">Pin</span><span class="o">.</span><span class="n">MED_POWER</span><span class="p">,</span> <span class="n">alt</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also configure the Pin to generate interrupts. For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span>

<span class="k">def</span> <span class="nf">pincb</span><span class="p">(</span><span class="n">pin</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">pin</span><span class="o">.</span><span class="n">id</span><span class="p">())</span>

<span class="n">pin_int</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;GP10&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Pin</span><span class="o">.</span><span class="n">IN</span><span class="p">,</span> <span class="n">pull</span><span class="o">=</span><span class="n">Pin</span><span class="o">.</span><span class="n">PULL_DOWN</span><span class="p">)</span>
<span class="n">pin_int</span><span class="o">.</span><span class="n">irq</span><span class="p">(</span><span class="n">trigger</span><span class="o">=</span><span class="n">Pin</span><span class="o">.</span><span class="n">IRQ_RISING</span><span class="p">,</span> <span class="n">handler</span><span class="o">=</span><span class="n">pincb</span><span class="p">)</span>
<span class="c1"># the callback can be triggered manually</span>
<span class="n">pin_int</span><span class="o">.</span><span class="n">irq</span><span class="p">()()</span>
<span class="c1"># to disable the callback</span>
<span class="n">pin_int</span><span class="o">.</span><span class="n">irq</span><span class="p">()</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>
</pre></div>
</div>
<p>Now every time a falling edge is seen on the gpio pin, the callback will be
executed. Caution: mechanical push buttons have “bounce” and pushing or
releasing a switch will often generate multiple edges.
See: <a class="reference external" href="http://www.eng.utah.edu/~cs5780/debouncing.pdf">http://www.eng.utah.edu/~cs5780/debouncing.pdf</a> for a detailed
explanation, along with various techniques for debouncing.</p>
<p>All pin objects go through the pin mapper to come up with one of the
gpio pins.</p>
<p>For the <code class="docutils literal notranslate"><span class="pre">drive</span></code> parameter the strengths are:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Pin.LOW_POWER</span></code> - 2mA drive capability.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Pin.MED_POWER</span></code> - 4mA drive capability.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Pin.HIGH_POWER</span></code> - 6mA drive capability.</p></li>
</ul>
</div></blockquote>
<p>For the <code class="docutils literal notranslate"><span class="pre">alt</span></code> parameter please refer to the pinout and alternate functions
table at &lt;<a class="reference external" href="https://raw.githubusercontent.com/wipy/wipy/master/docs/PinOUT.png">https://raw.githubusercontent.com/wipy/wipy/master/docs/PinOUT.png</a>&gt;`_
for the specific alternate functions that each pin supports.</p>
<p>For interrupts, the <code class="docutils literal notranslate"><span class="pre">priority</span></code> can take values in the range 1-7.  And the
<code class="docutils literal notranslate"><span class="pre">wake</span></code> parameter has the following properties:</p>
<blockquote>
<div><ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">wake_from=machine.Sleep.ACTIVE</span></code> any pin can wake the board.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">wake_from=machine.Sleep.SUSPENDED</span></code> pins <code class="docutils literal notranslate"><span class="pre">GP2</span></code>, <code class="docutils literal notranslate"><span class="pre">GP4</span></code>, <code class="docutils literal notranslate"><span class="pre">GP10</span></code>,
<code class="docutils literal notranslate"><span class="pre">GP11</span></code>, GP17`` or <code class="docutils literal notranslate"><span class="pre">GP24</span></code> can wake the board. Note that only 1
of this pins can be enabled as a wake source at the same time, so, only
the last enabled pin as a <code class="docutils literal notranslate"><span class="pre">machine.Sleep.SUSPENDED</span></code> wake source will have effect.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">wake_from=machine.Sleep.SUSPENDED</span></code> pins <code class="docutils literal notranslate"><span class="pre">GP2</span></code>, <code class="docutils literal notranslate"><span class="pre">GP4</span></code>, <code class="docutils literal notranslate"><span class="pre">GP10</span></code>,
<code class="docutils literal notranslate"><span class="pre">GP11</span></code>, <code class="docutils literal notranslate"><span class="pre">GP17</span></code> and <code class="docutils literal notranslate"><span class="pre">GP24</span></code> can wake the board. In this case all of the
6 pins can be enabled as a <code class="docutils literal notranslate"><span class="pre">machine.Sleep.HIBERNATE</span></code> wake source at the same time.</p></li>
</ul>
</div></blockquote>
<p>Additional Pin methods:</p>
<dl class="py method">
<dt class="sig sig-object py" id="machine.Pin.alt_list">
<span class="sig-prename descclassname"><span class="pre">machine.Pin.</span></span><span class="sig-name descname"><span class="pre">alt_list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machine.Pin.alt_list" title="Link to this definition">¶</a></dt>
<dd><p>Returns a list of the alternate functions supported by the pin. List items are
a tuple of the form: <code class="docutils literal notranslate"><span class="pre">('ALT_FUN_NAME',</span> <span class="pre">ALT_FUN_INDEX)</span></code></p>
</dd></dl>

</section>
<section id="additional-details-for-machine-i2c">
<h2>Additional details for machine.I2C<a class="headerlink" href="#additional-details-for-machine-i2c" title="Link to this heading">¶</a></h2>
<p>On the WiPy there is a single hardware I2C peripheral, identified by “0”.  By
default this is the peripheral that is used when constructing an I2C instance.
The default pins are GP23 for SCL and GP13 for SDA, and one can create the
default I2C peripheral simply by doing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">i2c</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">I2C</span><span class="p">()</span>
</pre></div>
</div>
<p>The pins and frequency can be specified as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">i2c</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">I2C</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="mi">400000</span><span class="p">,</span> <span class="n">scl</span><span class="o">=</span><span class="s1">&#39;GP23&#39;</span><span class="p">,</span> <span class="n">sda</span><span class="o">=</span><span class="s1">&#39;GP13&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Only certain pins can be used as SCL/SDA.  Please refer to the pinout for further
information.</p>
</section>
<section id="known-issues">
<h2>Known issues<a class="headerlink" href="#known-issues" title="Link to this heading">¶</a></h2>
<section id="incompatible-way-to-create-ssl-sockets">
<h3>Incompatible way to create SSL sockets<a class="headerlink" href="#incompatible-way-to-create-ssl-sockets" title="Link to this heading">¶</a></h3>
<p>SSL sockets need to be created the following way before wrapping them with.
<code class="docutils literal notranslate"><span class="pre">ssl.wrap_socket</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">ssl</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">IPPROTO_SEC</span><span class="p">)</span>
<span class="n">ss</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">wrap_socket</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p>Certificates must be used in order to validate the other side of the connection, and also to
authenticate ourselves with the other end. Such certificates must be stored as files using the
FTP server, and they must be placed in specific paths with specific names.</p>
<ul class="simple">
<li><p>The certificate to validate the other side goes in: <strong>‘/flash/cert/ca.pem’</strong></p></li>
<li><p>The certificate to authenticate ourselves goes in: <strong>‘/flash/cert/cert.pem’</strong></p></li>
<li><p>The key for our own certificate goes in: <strong>‘/flash/cert/private.key’</strong></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When these files are stored, they are placed inside the internal <strong>hidden</strong> file system
(just like firmware updates), and therefore they are never visible.</p>
</div>
<p>For instance to connect to the Blynk servers using certificates, take the file <code class="docutils literal notranslate"><span class="pre">ca.pem</span></code> located
in the <a class="reference external" href="https://github.com/wipy/wipy/tree/master/examples/blynk">blynk examples folder</a>.
and put it in ‘/flash/cert/’. Then do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">ssl</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">IPPROTO_SEC</span><span class="p">)</span>
<span class="n">ss</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">wrap_socket</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">cert_reqs</span><span class="o">=</span><span class="n">ssl</span><span class="o">.</span><span class="n">CERT_REQUIRED</span><span class="p">,</span> <span class="n">ca_certs</span><span class="o">=</span><span class="s1">&#39;/flash/cert/ca.pem&#39;</span><span class="p">)</span>
<span class="n">ss</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">getaddrinfo</span><span class="p">(</span><span class="s1">&#39;cloud.blynk.cc&#39;</span><span class="p">,</span> <span class="mi">8441</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="incompatibilities-in-hashlib-module">
<h3>Incompatibilities in hashlib module<a class="headerlink" href="#incompatibilities-in-hashlib-module" title="Link to this heading">¶</a></h3>
<p>Due to hardware implementation details of the WiPy, data must be buffered before being
digested, which would make it impossible to calculate the hash of big blocks of data that
do not fit in RAM. In this case, since most likely the total size of the data is known
in advance, the size can be passed to the constructor and hence the HASH hardware engine
of the WiPy can be properly initialized without needing buffering. If <code class="docutils literal notranslate"><span class="pre">block_size</span></code> is
to be given, an initial chunk of <code class="docutils literal notranslate"><span class="pre">data</span></code> must be passed as well. <strong>When using this extension,
care must be taken to make sure that the length of all intermediate chunks (including the
initial one) is a multiple of 4 bytes.</strong> The last chunk may be of any length.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">(</span><span class="s1">&#39;abcd1234&#39;</span><span class="p">,</span> <span class="mi">1001</span><span class="p">)</span>    <span class="c1"># length of the initial piece is multiple of 4 bytes</span>
<span class="nb">hash</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s1">&#39;1234&#39;</span><span class="p">)</span>                       <span class="c1"># also multiple of 4 bytes</span>
<span class="o">...</span>
<span class="nb">hash</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s1">&#39;12345&#39;</span><span class="p">)</span>                      <span class="c1"># last chunk may be of any length</span>
<span class="nb">hash</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="unrelated-function-in-machine-module">
<h3>Unrelated function in machine module<a class="headerlink" href="#unrelated-function-in-machine-module" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="main">
<span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#main" title="Link to this definition">¶</a></dt>
<dd><p>Set the filename of the main script to run after boot.py is finished.  If
this function is not called then the default file main.py will be executed.</p>
<p>It only makes sense to call this function from within boot.py.</p>
</dd></dl>

</section>
<section id="adhoc-way-to-control-telnet-ftp-server-via-network-module">
<h3>Adhoc way to control telnet/FTP server via network module<a class="headerlink" href="#adhoc-way-to-control-telnet-ftp-server-via-network-module" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Server</span></code> class controls the behaviour and the configuration of the FTP and telnet
services running on the WiPy. Any changes performed using this class’ methods will
affect both.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">network</span>
<span class="n">server</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="n">Server</span><span class="p">()</span>
<span class="n">server</span><span class="o">.</span><span class="n">deinit</span><span class="p">()</span> <span class="c1"># disable the server</span>
<span class="c1"># enable the server again with new settings</span>
<span class="n">server</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">login</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">),</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="network.Server">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">network.</span></span><span class="sig-name descname"><span class="pre">Server</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">...</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#network.Server" title="Link to this definition">¶</a></dt>
<dd><p>Create a server instance, see <code class="docutils literal notranslate"><span class="pre">init</span></code> for parameters of initialization.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="server.init">
<span class="sig-prename descclassname"><span class="pre">server.</span></span><span class="sig-name descname"><span class="pre">init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">login</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">('micro',</span> <span class="pre">'python')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">300</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server.init" title="Link to this definition">¶</a></dt>
<dd><p>Init (and effectively start the server). Optionally a new <code class="docutils literal notranslate"><span class="pre">user</span></code>, <code class="docutils literal notranslate"><span class="pre">password</span></code>
and <code class="docutils literal notranslate"><span class="pre">timeout</span></code> (in seconds) can be passed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="server.deinit">
<span class="sig-prename descclassname"><span class="pre">server.</span></span><span class="sig-name descname"><span class="pre">deinit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.deinit" title="Link to this definition">¶</a></dt>
<dd><p>Stop the server</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="server.timeout">
<span class="sig-prename descclassname"><span class="pre">server.</span></span><span class="sig-name descname"><span class="pre">timeout</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">timeout_in_seconds</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#server.timeout" title="Link to this definition">¶</a></dt>
<dd><p>Get or set the server timeout.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="server.isrunning">
<span class="sig-prename descclassname"><span class="pre">server.</span></span><span class="sig-name descname"><span class="pre">isrunning</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.isrunning" title="Link to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the server is running, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd></dl>

</section>
<section id="adhoc-vfs-like-support">
<h3>Adhoc VFS-like support<a class="headerlink" href="#adhoc-vfs-like-support" title="Link to this heading">¶</a></h3>
<p>WiPy doesn’t implement full MicroPython VFS support, instead following
functions are defined in <code class="docutils literal notranslate"><span class="pre">os</span></code> module:</p>
<dl class="py function">
<dt class="sig sig-object py" id="mount">
<span class="sig-name descname"><span class="pre">mount</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mount_point</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">readonly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mount" title="Link to this definition">¶</a></dt>
<dd><p>Mounts a block device (like an <code class="docutils literal notranslate"><span class="pre">SD</span></code> object) in the specified mount
point. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vfs</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="n">sd</span><span class="p">,</span> <span class="s1">&#39;/sd&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="unmount">
<span class="sig-name descname"><span class="pre">unmount</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unmount" title="Link to this definition">¶</a></dt>
<dd><p>Unmounts a previously mounted block device from the given path.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mkfs">
<span class="sig-name descname"><span class="pre">mkfs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_device</span> <span class="pre">or</span> <span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mkfs" title="Link to this definition">¶</a></dt>
<dd><p>Formats the specified path, must be either <code class="docutils literal notranslate"><span class="pre">/flash</span></code> or <code class="docutils literal notranslate"><span class="pre">/sd</span></code>.
A block device can also be passed like an <code class="docutils literal notranslate"><span class="pre">SD</span></code> object before
being mounted.</p>
</dd></dl>

</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>

      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">General information about the WiPy</a><ul>
<li><a class="reference internal" href="#no-floating-point-support">No floating point support</a></li>
<li><a class="reference internal" href="#before-applying-power">Before applying power</a></li>
<li><a class="reference internal" href="#wlan-default-behaviour">WLAN default behaviour</a></li>
<li><a class="reference internal" href="#telnet-repl">Telnet REPL</a></li>
<li><a class="reference internal" href="#local-file-system-and-ftp-access">Local file system and FTP access</a></li>
<li><a class="reference internal" href="#filezilla-settings">FileZilla settings</a></li>
<li><a class="reference internal" href="#upgrading-the-firmware-over-the-air">Upgrading the firmware Over The Air</a></li>
<li><a class="reference internal" href="#boot-modes-and-safe-boot">Boot modes and safe boot</a></li>
<li><a class="reference internal" href="#the-heartbeat-led">The heartbeat LED</a></li>
<li><a class="reference internal" href="#details-on-sleep-modes">Details on sleep modes</a></li>
<li><a class="reference internal" href="#additional-details-for-machine-pin">Additional details for machine.Pin</a><ul>
<li><a class="reference internal" href="#machine.Pin.alt_list"><code class="docutils literal notranslate"><span class="pre">machine.Pin.alt_list()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#additional-details-for-machine-i2c">Additional details for machine.I2C</a></li>
<li><a class="reference internal" href="#known-issues">Known issues</a><ul>
<li><a class="reference internal" href="#incompatible-way-to-create-ssl-sockets">Incompatible way to create SSL sockets</a></li>
<li><a class="reference internal" href="#incompatibilities-in-hashlib-module">Incompatibilities in hashlib module</a></li>
<li><a class="reference internal" href="#unrelated-function-in-machine-module">Unrelated function in machine module</a><ul>
<li><a class="reference internal" href="#main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#adhoc-way-to-control-telnet-ftp-server-via-network-module">Adhoc way to control telnet/FTP server via network module</a><ul>
<li><a class="reference internal" href="#network.Server"><code class="docutils literal notranslate"><span class="pre">network.Server</span></code></a></li>
<li><a class="reference internal" href="#server.init"><code class="docutils literal notranslate"><span class="pre">server.init()</span></code></a></li>
<li><a class="reference internal" href="#server.deinit"><code class="docutils literal notranslate"><span class="pre">server.deinit()</span></code></a></li>
<li><a class="reference internal" href="#server.timeout"><code class="docutils literal notranslate"><span class="pre">server.timeout()</span></code></a></li>
<li><a class="reference internal" href="#server.isrunning"><code class="docutils literal notranslate"><span class="pre">server.isrunning()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#adhoc-vfs-like-support">Adhoc VFS-like support</a><ul>
<li><a class="reference internal" href="#mount"><code class="docutils literal notranslate"><span class="pre">mount()</span></code></a></li>
<li><a class="reference internal" href="#unmount"><code class="docutils literal notranslate"><span class="pre">unmount()</span></code></a></li>
<li><a class="reference internal" href="#mkfs"><code class="docutils literal notranslate"><span class="pre">mkfs()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="quickref.html"
                          title="previous chapter">Quick reference for the WiPy</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="tutorial/index.html"
                          title="next chapter">WiPy tutorials and examples</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/wipy/general.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tutorial/index.html" title="WiPy tutorials and examples"
             >next</a> |</li>
        <li class="right" >
          <a href="quickref.html" title="Quick reference for the WiPy"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MicroPython latest documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="quickref.html" >Quick reference for the WiPy</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">General information about the WiPy</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright - The MicroPython Documentation is Copyright © 2014-2024, Damien P. George, Paul Sokolovsky, and contributors.
      Last updated on 24 Jul 2024.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    </div>
  </body>
</html>